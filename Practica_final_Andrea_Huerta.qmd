---
title: "Practica_final_Andrea_Huerta"
format: html
editor: visual
---

Vamos a utilizar el dataset de semillas que se encuentra aquÃ­: https://archive.ics.uci.edu/ml/datasets/seeds#

Primero vamos a descargarnos el dataset con el siguiente comando:

```{r}
library(tidyverse)
df_seeds <- read.table('https://archive.ics.uci.edu/ml/machine-learning-databases/00236/seeds_dataset.txt', col.names =c('area','perimetro','compacto','longitud','anchura','coeficient.asimetria','longitud.ranura','tipo'))
```

#### PREGUNTA 1

Â¿Cuantas filas y cuantas columnas tiene el dataframe df_seeds?

**Respuesta**:

```{r}
paste("Tiene", length(df_seeds$tipo), "filas.")
paste("Tiene", length(colnames(df_seeds)), "columnas.")
```

#### PREGUNTA 2

Vamos a convertir en factor la columna tipo. Vamos a reemplazar los nÃºmeros por su correspondiente etiqueta (label). La correspondencia entre el cÃ³digo y el tipo es:

-   1 - Kama
-   2 - Rosa
-   3 - Canadian

Convierte en factor la columna tipo, respetando las etiquetas:

**Respuesta**:

```{r}
df_seeds$tipo <- factor(df_seeds$tipo, labels = c('Kama','Rosa', 'Canadian'))
```

#### PREGUNTA 3

Â¿Cual es la media del area de cada uno de los tipos?

**Respuesta**

```{r}
df_seeds |> 
  group_by(tipo) |>
  summarise(avg_area=mean(area, na.rm = T))
```

#### PREGUNTA 4

Â¿Como se llama el siguiente tipo de grÃ¡fico?. Â¿QuÃ© representa la lÃ­nea del centro de la caja?

```{r}
ggplot(df_seeds, aes(x=tipo, y=area)) + geom_boxplot()
```

**Respuesta**: '' Boxplot. La línea del medio de la caja representa la mediana."

#### PREGUNTA 5

Â¿Como pintarÃ­as un diagrama de puntos (o scatterplot) con ggplot con las siguientes caracterÃ­sticas? - En el eje X la variable compacto - En el eje Y la variable area - Cada tipo de semilla deberÃ­a tener un color diferente

**Respuesta**:

```{r}
ggplot(df_seeds,aes(x=compacto,y=area,color=tipo))+geom_point(size=3)
```

#### PREGUNTA 6

Â¿QuÃ© hace la siguiente lÃ­nea?:

```{r}
df_seeds |> mutate(is_kama = tipo=='Kama') -> df_seeds
```

**Respuesta**: ''Crea un campo en df_seeds llamado is_kama cuyo valor es TRUE si el campo tipo es igual a Kama, y FALSE si no lo es."

#### PREGUNTA 7

Vamos a dividir el conjunto de datos en test y training porque vamos a entrenar un modelo que me permita diferenciar si una semilla es de tipo Kama o no. Â¿Por quÃ© es aconsejable dividir el dataset en los grupos de train y test?

```{r}
set.seed(123) # Este set.seed hace que a todos nos generen los mismos nÃºmero aleatorios
idx <- sample(1:nrow(df_seeds), 0.7*nrow(df_seeds))
df_seeds_train <- df_seeds[idx,]
df_seeds_test <- df_seeds[-idx,]
```

**Respuesta**: ''Porque el grupo de train (70-80% de los datos) se utilizará para entrenar el modelo y que aprenda. El grupo de test (resto de datos) probará la calidad del mismo, si predice bien o no. Para poder comprobar eso deben ser datos que no haya visto el modelo."

#### PREGUNTA 8

Vamos a crear un modelo para realizar una clasificaciÃ³n binaria, donde le pasaremos como entrada las columnas: area, perimetro, compacto, longitud, coeficient.asimetria y longitud.ranura

Â¿QuÃ© tipo de algoritmo o modelo deberÃ­a usar?

**Respuesta**: ''Un modelo de regresión logística."

#### PREGUNTA 9

Crea un modelo que me permita clasificar si una semilla es de tipo Kama o no con las siguientes columnas: area, perimetro, compacto, longitud, coeficient.asimetria, longitud.ranura

**Respuesta**:

```{r}
model<-glm(data=df_seeds_train,
           formula=is_kama~area+perimetro+compacto+longitud+coeficient.asimetria+longitud.ranura,
           family=binomial(link='logit'))
summary(model)
```

#### PREGUNTA 10

Si usamos un umbral de 0 en la salida del modelo (lo que equivale a probabilidad de 0.5 cuando usamos el predict con type='response') Â¿Cuales son los valores de precisiÃ³n y exhausitividad?

**Respuesta**.

```{r}
umbral <- 0.5
pred_test<-predict(model, df_seeds_test, type="response")
M=table(real=df_seeds_test$is_kama, pred=pred_test>umbral)
print("Matriz de confusión")
M

paste("La precisión es:",M[2,2]/(M[1,2]+M[2,2]))
paste("La exhaustividad es:",M[2,2]/(M[2,1]+M[2,2]))

```

#### PREGUNTA 11

Â¿QuÃ© estÃ¡n haciendo las siguientes lÃ­neas?

```{r}
set.seed(123)
cl<-df_seeds |> select(area,perimetro,compacto,longitud,anchura,coeficient.asimetria,longitud.ranura) |> kmeans(3)
table(real=df_seeds$tipo,cluster=cl$cluster)
```

**Respuesta**: ''Esas líneas seleccionan los campos para hacer una clusterización por kmeans. El resultado es una tabla que compara el tipo real de dataframe con los tres clusters."
